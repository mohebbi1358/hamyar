<!DOCTYPE html>
<html lang="fa">
<head>
    <!-- Bootstrap CSS (RTL) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <meta charset="UTF-8">
    <title>{% block title %}سایت همیار{% endblock %}</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            direction: rtl;
            background-color: #f8f9fa;
        }

        header, footer {
            background-color: #333;
            color: white;
            padding: 10px 20px;
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: flex-start;
            gap: 20px;
            padding: 0;
            margin: 0;
        }

        nav ul li {
            position: relative;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            padding: 8px;
            display: block;
        }

        nav ul li:hover > a {
            background-color: #444;
            border-radius: 4px;
        }

        .profile-menu {
            position: absolute;
            right: 0;
            background: #fff;
            color: #000;
            list-style: none;
            padding: 0;
            margin: 0;
            display: none;
            min-width: 180px;
            border: 1px solid #ccc;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .profile-menu li a {
            color: #000;
            padding: 10px;
            display: block;
            text-decoration: none;
        }

        .profile-menu li a:hover {
            background-color: #f0f0f0;
        }

        nav ul li:hover .profile-menu {
            display: block;
        }

        main {
            padding: 20px;
        }

        footer nav ul {
            flex-wrap: wrap;
            gap: 15px;
        }
    </style>
    <!-- Persian Datepicker CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/css/persian-datepicker.min.css">

</head>
<body>

<header>
    <nav>
        <ul>
            <li><a href="/">خانه</a></li>
            <li><a href="/martyrs/list/">لیست شهدا</a></li>
            <li><a href="{% url 'news:news_list' %}">اخبار</a></li>
            {% if user.is_authenticated %}
                <li>
                    <a href="#">
                        {% if user.gender == 'male' %}
                            آقای {{ user.last_name }}
                        {% elif user.gender == 'female' %}
                            خانم {{ user.last_name }}
                        {% else %}
                            {{ user.get_full_name|default:user.phone }}
                        {% endif %}
                    </a>
                    <ul class="profile-menu">
                        <li><a href="{% url 'accounts:dashboard' %}">داشبورد</a></li>
                        <li><a href="{% url 'accounts:complete_profile' %}?phone={{ user.phone }}">ویرایش پروفایل</a></li>
                        {% if request.user.is_authenticated and request.user.allowed_categories.exists %}
                            <li><a href="{% url 'news:create_news' %}">ارسال خبر</a></li>
                        {% endif %}
                        
                        <li><a href="{% url 'martyrs:create_martyr' %}">افزودن شهید</a></li>
                            {% if user.is_authenticated and user.is_staff %}
                                <li><a href="{% url 'accounts:user_list' %}">مدیریت کاربران</a></li>
                            {% endif %}
                        <li><a href="{% url 'accounts:logout' %}">خروج</a></li>
                    </ul>
                </li>
            {% else %}
                <li><a href="{% url 'accounts:login' %}">ورود</a></li>
            {% endif %}
        </ul>
    </nav>
</header>

<main>
    {% block content %}{% endblock %}
</main>

<footer>
    <nav>
        <ul>
            <li><a href="{% url 'news:news_list' %}">اخبار</a></li>
            {% if user.is_authenticated %}
                <li><a href="{% url 'accounts:dashboard' %}">داشبورد</a></li>
                <li><a href="{% url 'donate' %}">صدقه</a></li>
                <li><a href="{% url 'wallet:charge_wallet' %}">شارژ کیف پول</a></li>
                

            {% else %}
                <li><a href="{% url 'accounts:login' %}?next={% url 'accounts:dashboard' %}">پروفایل</a></li>
            {% endif %}
        </ul>
    </nav>
</footer>
<!-- jQuery -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>

<!-- Persian Date core -->
<script src="https://cdn.jsdelivr.net/npm/persian-date@1.0.6/dist/persian-date.min.js"></script>

<!-- Persian Datepicker -->
<script src="https://cdn.jsdelivr.net/npm/persian-datepicker@1.2.0/dist/js/persian-datepicker.min.js"></script>
{% block scripts %}{% endblock %}
</body>
</html>
